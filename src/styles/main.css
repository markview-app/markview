/* MarkView Content Styles */

/* Root variables for theming - scoped to MarkView */
html.markview-active {
  --markview-bg: #ffffff;
  --markview-text: #24292e;
  --markview-text-muted: #6a737d;
  --markview-border: #e1e4e8;
  --markview-code-bg: #f6f8fa;
  --markview-link: #0366d6;
  --markview-table-header-bg: #f6f8fa;
  --markview-table-stripe-bg: #f6f8fa;

  /* Info banner colors (light theme) */
  --info-banner-bg: #fef3c7;
  --info-banner-border: #f59e0b;
  --info-banner-text: #92400e;
  --info-banner-link: #d97706;
}

/* Dark theme - scoped to MarkView */
html.markview-active.markview-dark {
  --markview-bg: #0d1117;
  --markview-text: #c9d1d9;
  --markview-text-muted: #8b949e;
  --markview-border: #30363d;
  --markview-code-bg: #161b22;
  --markview-link: #58a6ff;
  --markview-table-header-bg: #161b22;
  --markview-table-stripe-bg: #161b22;

  /* Info banner colors (dark theme) */
  --info-banner-bg: #422006;
  --info-banner-border: #f59e0b;
  --info-banner-text: #fbbf24;
  --info-banner-link: #fbbf24;
}

/* Base styles for body - ONLY when MarkView is active */
html.markview-active body {
  background: var(--markview-bg);
  color: var(--markview-text);
  margin: 0;
  padding: 0;
}

/* MarkView container */
#markview-container {
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    Oxygen,
    Ubuntu,
    Cantarell,
    'Fira Sans',
    'Droid Sans',
    'Helvetica Neue',
    Arial,
    sans-serif;
  line-height: 1.6;
  color: var(--markview-text);
  /* Layout (max-width, margin, width) is controlled by JavaScript in dom.ts */
  /* Default centered layout is applied on page load via applyLayoutSettings() */
  padding: 20px;
  background: var(--markview-bg);
  min-height: 100vh;
  box-sizing: border-box;
}

/* Headings - scoped to MarkView container */
#markview-container h1,
#markview-container h2,
#markview-container h3,
#markview-container h4,
#markview-container h5,
#markview-container h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

#markview-container h1 {
  font-size: 2em;
  border-bottom: 1px solid var(--markview-border);
  padding-bottom: 0.3em;
}

#markview-container h2 {
  font-size: 1.5em;
  border-bottom: 1px solid var(--markview-border);
  padding-bottom: 0.3em;
}

#markview-container h3 {
  font-size: 1.25em;
}

/* Code - scoped to MarkView container */
#markview-container code {
  background: var(--markview-code-bg);
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-family: 'Courier New', Courier, monospace;
  font-size: 85%;
  color: var(--brand-primary); /* Using main brand color */
  transition: background var(--transition-fast); /* Smooth hover transition */
}

/* Hover effect for inline code */
#markview-container code:hover {
  color: var(--brand-primary); /* Keep main brand color on hover */
  background: var(--markview-border);
}

/* Code blocks */
#markview-container pre {
  background: var(--markview-code-bg);
  padding: 16px;
  border-radius: 6px;
  overflow-x: auto;
}

/* Custom scrollbar for code blocks - matching TOC style */
#markview-container pre::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

#markview-container pre::-webkit-scrollbar-track {
  background: #f6f8fa;
}

#markview-container pre::-webkit-scrollbar-thumb {
  background: #d1d5da;
  border-radius: 4px;
}

#markview-container pre::-webkit-scrollbar-thumb:hover {
  background: #959da5;
}

#markview-container pre::-webkit-scrollbar-corner {
  background: #f6f8fa;
}

/* Dark theme for code blocks */
.markview-dark #markview-container pre::-webkit-scrollbar-track {
  background: #0d1117;
}

.markview-dark #markview-container pre::-webkit-scrollbar-thumb {
  background: #30363d;
}

.markview-dark #markview-container pre::-webkit-scrollbar-thumb:hover {
  background: #484f58;
}

.markview-dark #markview-container pre::-webkit-scrollbar-corner {
  background: #0d1117;
}

#markview-container pre code {
  color: var(--markview-text); /* Reset color for code blocks */
  background: none;
  padding: 0;
}

#markview-container pre code:hover {
  color: var(--markview-text);
  background: none; /* Remove hover effect for code blocks */
}

/* Code Block Display Modes */
/* Wrap mode: Break long lines to prevent horizontal scrolling */
#markview-container.code-block-wrap pre code {
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  overflow-x: visible !important;
}

/* Scroll mode: Preserve formatting with horizontal scrollbar (default) */
#markview-container.code-block-scroll pre code {
  white-space: pre !important;
  overflow-x: auto !important;
}

/* Links - scoped to MarkView container */
#markview-container a {
  color: var(--brand-primary); /* Using main brand color */
  text-decoration: none;
  transition: color var(--transition-fast); /* Smooth hover transition */
}

#markview-container a:hover {
  color: var(--brand-primary); /* Keep main brand color on hover */
  text-decoration: underline;
}

/* Lists */
ul,
#markview-container ol {
  padding-left: 2em;
  margin-bottom: 16px;
}

#markview-container li {
  margin-bottom: 0.25em;
}

/* Blockquotes */
#markview-container blockquote {
  margin: 0;
  padding: 0 1em;
  color: var(--markview-text-muted);
  border-left: 0.25em solid var(--markview-border);
}

/* Images */
#markview-container img {
  max-width: 100%;
  height: auto;
  cursor: zoom-in;
}

/* Images inside links should keep pointer cursor */
#markview-container a img {
  cursor: pointer;
}

/* Lazy loading images - smooth fade in */
#markview-container img.lazy-loading {
  opacity: 0;
  transition: opacity 0.3s ease-in;
}

#markview-container img.lazy-loaded {
  opacity: 1;
}

/* Horizontal rule */
#markview-container hr {
  height: 0.25em;
  padding: 0;
  margin: 24px 0;
  background-color: var(--markview-border);
  border: 0;
}

/* Task lists */
#markview-container .task-list-item {
  list-style-type: none;
}

#markview-container .task-list-item input[type='checkbox'] {
  margin-right: 0.5em;
}

/* Animations for notifications */
@keyframes markview-fadein {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes markview-fadeout {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-10px);
  }
}
